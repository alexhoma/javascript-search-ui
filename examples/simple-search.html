<html>
<head>
    <title>Apisearch UI</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.0/css/bulma.min.css">

    <!-- ApisearchUI library -->
    <script src="../dist/apisearch-ui.js"></script>
</head>

<body>
    <div class="container">
        <!-- Logo -->
        <div class="column">
            <img class="has-text-centered"
                 src="https://apisearch.io/bundles/apisearchweb/images/logo-.png"
                 width="300">
        </div>

        <!-- SimpleSearch -->
        <div class="search"></div>

        <!-- Result -->
        <div class="columns">
            <div class="column is-one-quarter">
                <!-- Information -->
                <div class="information column"></div>

                <!-- Filters -->
                <div class="sort-by column"></div>
            </div>
            <div class="result column is-three-quarters"></div>
        </div>
    </div>

    <script type="text/template" id="result-search-tpl">
        <div class="columns is-multiline is-variable">
        {{#items}}
            <div class="column is-narrow is-one-third">
                <div class="card">
                    <div class="card-content">
                        <div class="media">
                            <div class="media-content">
                                <strong>{{metadata.name}}</strong>
                                {{#metadata.author}}
                                <p class="has-text-info is-size-7">@{{name}}</p>
                                {{/metadata.author}}
                                <hr />
                                <p class="has-text-grey is-size-7">{{indexed_metadata.created_at}}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {{/items}}
        </div>
        {{^items}}
        <div class="notification">Empty set of results :(</div>
        {{/items}}
    </script>

    <script type="text/template" id="suggestion-box-tpl">
        <div class="panel">
        {{#suggests}}
            <a class="panel-block">{{.}}</a>
        {{/suggests}}
        </div>
    </script>

    <script>
        // UI Instance
        let ui = apisearchUI('laie_ca');

        ui.addWidgets(
            ui.widgets.suggestedSearch({
                target: '.search',
                placeholder: 'Search something suggested...',
                classNames: {
                    container: 'column',
                    input: 'input'
                },
                template: {
                    box: document.getElementById('suggestion-box-tpl').text
                }
            }),
            ui.widgets.sortBy({
                target: '.sort-by',
                classNames: {
                    container: 'select',
                },
                options: [
                    {name: 'Oldest', value: 'created_at:asc'},
                    {name: 'Newest', value: 'created_at:desc'}
                ]
            }),
            ui.widgets.result({
                target: '.result',
                classNames: {
                    container: 'column'
                },
                template: {
                    top: '<strong>These are the results</strong><hr/>',
                    body: document.getElementById('result-search-tpl').text,
                    bottom: '<hr/><strong>Here comes the footer</strong>'
                }
            }),
            ui.widgets.information({
                target: '.information',
                template: {
                    container: '<span class="tag is-info">Matched {{total_hits}} of {{total_items}}!</span>'
                }
            })
        );

        ui.init();
    </script>
</body>
</html>